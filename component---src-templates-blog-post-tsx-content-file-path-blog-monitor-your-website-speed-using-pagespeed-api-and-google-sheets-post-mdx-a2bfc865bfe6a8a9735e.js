"use strict";(self.webpackChunksamuellawrentz_s_portfolio=self.webpackChunksamuellawrentz_s_portfolio||[]).push([[1590],{9408:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var n=a(1151),o=a(7294);function r(e){const t=Object.assign({p:"p",h2:"h2",a:"a",span:"span",h3:"h3",strong:"strong",em:"em",code:"code"},(0,n.a)(),e.components),{Banner:a}=t;return a||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Banner",!0),o.createElement(o.Fragment,null,o.createElement(t.p,null,"Everyone loves speed - be it cars, superbikes, or websites. A good website (like this one üòâ) loads content within the blink of an eye. A fast website can generate a lot of traffic easily. Users feel energetic and comfortable in using a website that responds quickly to their inputs. To measure the speed and performance, you need to be introduced to PageSpeed."),"\n",o.createElement(t.h2,null,"PageSpeed ‚ö°Ô∏è"),"\n",o.createElement(t.p,null,o.createElement(t.a,{href:"https://developers.google.com/speed/docs/insights/v5/get-started"},"PageSpeed Insights")," is a google metric that helps developers and businesses to find out how their website performs and loads on different devices and conditions. A good website must have a PageSpeed above 90, where 100 is the best."),"\n",o.createElement(t.p,null,"The PageSpeed of this website is almost 95-98. I'm planning to make it 100 soon, stay tuned."),"\n",o.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/0df1eb5b5c2a004b1dadabcf8877ed15/e04e6/pagespeed.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 49%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABvElEQVR42p2Sz2sTQRzFY6+l2EO8eAuJhUKxhSKFBsSDSYul195KPSgoUr30oAEFlQpCPEr/gvbon+BNaCFpvYhYUGih1PRHdjezP2dn9+PsbjU2RgS/8JhhZvfte29fjj4TxzH/O7neAxkrwjjq+7AKQywh6DgOpmki9N4wDI5aLTzP6xL+1ONEAR+MT2yLr+eIoij7wMedHcYnJ7lRqXC9XGZ8YoKb1Spz8/O8qdf/JDQjj/en22xan/ndtFIqXRuNBoVCgVszM8zNzlIaucLjh4/YeLvGi9XVjDDJK3lBaRUykHz5vsf+yREJhzyDijLCZrNJqVhkujzNtakprmry109qvKrVeP7saUaY2AmCANu2s1wMk2PDp2WB0LE4QaIws9zc2qI4OMho/hKl4YuMDg0xls9zeeACL1dWugpTWzpUJX2UL/BDiZAeoQzPZfhtd5flxUXu37nNg6Ul7iV7vd5dWODd+npGmNhMM9LEcYqI6Azxr7N/1yiNTSN36nW0xWNMy8TRdfjbdEKXdqeta9Im8P3e4mo3mbCcVJJD6xDbtdMspb7oB9d3OTAOEK5If17vfag7mjj5AZpwyEVkEzPUAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="This sites Pagespeed"\n        title=""\n        src="/static/0df1eb5b5c2a004b1dadabcf8877ed15/c1b63/pagespeed.png"\n        srcset="/static/0df1eb5b5c2a004b1dadabcf8877ed15/5a46d/pagespeed.png 300w,\n/static/0df1eb5b5c2a004b1dadabcf8877ed15/0a47e/pagespeed.png 600w,\n/static/0df1eb5b5c2a004b1dadabcf8877ed15/c1b63/pagespeed.png 1200w,\n/static/0df1eb5b5c2a004b1dadabcf8877ed15/d61c2/pagespeed.png 1800w,\n/static/0df1eb5b5c2a004b1dadabcf8877ed15/e04e6/pagespeed.png 2152w"\n        sizes="(max-width: 1200px) 100vw, 1200px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n  </a>\n    </span>'}}),"\n",o.createElement(t.p,null,"You can get the speed insights of your website here - ",o.createElement(t.a,{href:"https://pagespeed.web.dev/"},"Google PageSpeed Insigts")),"\n",o.createElement(a,null,"There are a few ways to improve PageSpeed, but it's a topic for another post."),"\n",o.createElement(t.h3,null,"PageSpeed API"),"\n",o.createElement(t.p,null,"This API is provided by google so that you can fetch your PageSpeed scores programmatically using the API. To get started, you have to create a google project and ",o.createElement(t.a,{href:"https://console.developers.google.com/apis/credentials"},"enable API usage.")," You will get an ",o.createElement(t.strong,null,"API Key"),". This is required to make API calls to the google PageSpeed server. Google has a free tier so cost shouldn't be a concern."),"\n",o.createElement(t.h2,null,"Google Sheets Apps Script"),"\n",o.createElement(t.p,null,"Google sheet has a section that allows you to write scripts that can be triggered automatically. The syntax looks like plain Javascript, but its called ",o.createElement(t.a,{href:"https://www.google.com/script/start/"},"Apps Script or Google Script"),". You can find it in Extensions > Apps Script."),"\n",o.createElement(t.h3,null,"Ok fine, How do we do the monitoring part?"),"\n",o.createElement(t.p,null,"You can make an API call to fetch the PageSpeed data and then write it to the last row in the sheet once everyday. In this manner, we can have a track of daily PageSpeed data and it can be used for further analytics."),"\n",o.createElement(t.p,null,"You can even set up a mail alert if the PageSpeed goes than, say 80 ",o.createElement(t.em,null,"(I'm leaving it upto you, my fellow developer)"),". The AppsScript code is as follows, put it in the ",o.createElement(t.code,null,"Code.gs")," file in the script editor."),"\n",o.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<deckgo-highlight-code language="js"  >\n          <code slot="code">// Code.gs\n\n// You can insert all the pages that you want to monitor into this array.\nvar urls = [&#39;www.samuellawrentz.com&#39;];\nvar lastRow = 0;\n\nfunction initialize(){\n  lastRow = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet().getLastRow() + 1;\n  var dateCell = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet().getRange(lastRow, 1);\n  \n  // Set the date on the first column\n  dateCell.setValue(new Date()).setNumberFormat(&quot;dd/MM/yyyy&quot;);\n  urls.forEach(function(item, index){\n  myFunction(item, index)\n});\n}\n\n\nfunction myFunction(url, index) {\n  var url = &#39;https://www.googleapis.com/pagespeedonline/v5/runPagespeed?url=https%3A%2F%2F&#39;+ encodeURIComponent(url)+&#39;&amp;category=performance&amp;key=YOUR_API_KEY_GOES_HERE&#39;;\n  var options = {\n    &#39;method&#39;: &#39;get&#39;\n  };\n  var response = UrlFetchApp.fetch(url, options);\n  addData(response, index);\n}\n\n// Write the data to the next row to the last filled row\nfunction addData(response, index) {\n  var res = JSON.parse(response.getContentText());\n  var cell = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet().getRange(lastRow, index + 2);\n  cell.setValue(res.lighthouseResult.categories.performance.score * 100);\n  \n}</code>\n        </deckgo-highlight-code>'}}),"\n",o.createElement(t.p,null,"Set up a trigger ",o.createElement(t.em,null,"(can be found on the left side bar of the editor)")," that fires every day at midnight. You can see this script doing its work automatically every night for you. You can look at my google sheet for reference - https://docs.google.com/spreadsheets/d/15O2yPtvmFZvEEaxoZqpR-LksZ7CQR9SJjC5WETNgtaU/edit?usp=sharing"),"\n",o.createElement(t.p,null,"As you can see, I started the script recently. I'm planning to use the data for further analysis and produce historical charts later down the road. If you wanna know my journey to start this blog read - \"",o.createElement(t.a,{href:"https://samuellawrentz.com/blog/how-i-started-a-tech-blog/"},"How I started a tech blog?"),'"'),"\n",o.createElement(t.p,null,"‚ö°Ô∏è‚ö°Ô∏è‚ö°Ô∏è"))}var s=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,n.a)(),e.components);return t?o.createElement(t,e,o.createElement(r,e)):r(e)};var l=a(9861),i=a(6162),c=a(9202),d=a(2092),p=a(6243),g=a(1528),m=a(4021),h=a(9931);const u={Banner:g.Z};function f(e){return(0,o.useEffect)((()=>{(0,c.q)()}),[]),o.createElement("div",{className:"blog-content"},o.createElement(d.Z,{title:`Samuel Lawrentz | ${e.data.mdx.frontmatter.title}`,description:e.data.mdx.frontmatter.description,image:`/og-images/${e.data.mdx.frontmatter.path.replace(/[/-]/gi,"")}.png`,article:!0}),o.createElement(i.Z,{fluid:e.data.mdx.frontmatter.heroImage.childImageSharp.fluid,className:"hero-image"}),o.createElement("h1",null,e.data.mdx.frontmatter.title),o.createElement(p.g,{className:"tags",spacing:[0]},e.data.mdx.frontmatter.tags.map((e=>o.createElement("div",{className:"tag"},e)))),o.createElement("p",{className:"regularLight"},o.createElement("div",{className:"text-regularLight"},e.data.mdx.frontmatter.date)),o.createElement(p.g,{className:"blog-cont text-regular",spacing:[72]},o.createElement(n.Z,{components:u},o.createElement("div",null,e.children))),o.createElement(p.g,{spacing:[32]},"Consider subscribing to the newsletter for more tips and hacks like this.",o.createElement("div",{style:{marginTop:8}}),o.createElement(h.J,null)),o.createElement(l.Z,{repo:"samuellawrentz/blog-comments",repoId:"R_kgDOH0vDow",category:"General",categoryId:"DIC_kwDOH0vDo84CQ111",mapping:"pathname",reactionsEnabled:"0",emitMetadata:"0",theme:"dark"}),o.createElement(m.do,{config:{alignment:"left",color:"social",enabled:!0,font_size:16,hide_desktop:!1,labels:"counts",language:"en",min_count:0,networks:["linkedin","facebook","twitter","pinterest","email","whatsapp"],padding:12,radius:4,show_total:!0,show_mobile:!0,show_toggle:!0,size:48,top:160,url:`https://samuellawrentz.com${e.data.mdx.frontmatter.path}`,description:e.data.mdx.frontmatter.description,title:e.data.mdx.frontmatter.title,message:`Check out this post by Samuel Lawrentz on - ${e.data.mdx.frontmatter.title}.\n            Find it here - https://samuellawrentz.com${e.data.mdx.frontmatter.path}\n            `,subject:`Samuel Lawrentz Blog - ${e.data.mdx.frontmatter.title}`,username:"samuellawrentz"}}))}function b(e){return o.createElement(f,e,o.createElement(s,e))}}}]);
//# sourceMappingURL=component---src-templates-blog-post-tsx-content-file-path-blog-monitor-your-website-speed-using-pagespeed-api-and-google-sheets-post-mdx-a2bfc865bfe6a8a9735e.js.map