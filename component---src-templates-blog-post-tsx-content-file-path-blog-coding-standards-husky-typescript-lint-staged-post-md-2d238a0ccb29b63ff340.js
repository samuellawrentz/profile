"use strict";(self.webpackChunksamuellawrentz_s_portfolio=self.webpackChunksamuellawrentz_s_portfolio||[]).push([[4375],{2658:function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var o=n(1151),l=n(7294);function a(e){const t=Object.assign({p:"p",h2:"h2",h3:"h3",ol:"ol",li:"li",span:"span",blockquote:"blockquote",code:"code",h4:"h4",ul:"ul",a:"a"},(0,o.a)(),e.components);return l.createElement(l.Fragment,null,l.createElement(t.p,null,"Typescript is a great tool to enforce coding standards and it helps in removing most of the buggy code beforehand. But it is not enough, we need to have a way to enforce coding standards across the team. We can use husky and lint-staged to enforce coding standards."),"\n",l.createElement(t.h2,null,"ESLint"),"\n",l.createElement(t.p,null,"Just use airbnb's eslint config. It's the best. It takes care of most of the things. It's a great starting point. You can add your own rules on top of it. Mostly you'll be removing rules because they are very strict."),"\n",l.createElement(t.h3,null,"Configuring ESLint"),"\n",l.createElement(t.ol,null,"\n",l.createElement(t.li,null,"Install eslint"),"\n"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<deckgo-highlight-code language="bash"  >\n          <code slot="code">bun install eslint eslint-config-airbnb-typescript eslint-config-airbnb -D</code>\n        </deckgo-highlight-code>'}}),"\n",l.createElement(t.ol,{start:"2"},"\n",l.createElement(t.li,null,"Add a eslint.cofig.js file to configure ESLint."),"\n"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<deckgo-highlight-code language="js"  >\n          <code slot="code">module.exports = {\n  parser: &quot;@typescript-eslint/parser&quot;,\n  extends: [\n    &quot;airbnb&quot;,\n    &quot;airbnb-typescript&quot;,\n    &quot;plugin:@typescript-eslint/recommended&quot;,\n    &quot;prettier&quot;,\n  ],\n  plugins: [&quot;prettier&quot;, &quot;@typescript-eslint&quot;],\n};</code>\n        </deckgo-highlight-code>'}}),"\n",l.createElement(t.blockquote,null,"\n",l.createElement(t.p,null,"Add other packages if you want to use them"),"\n"),"\n",l.createElement(t.p,null,"This config should be rigid enough to enforce coding standards. But if you want to add more rules, you can add them in the config file. Once you do this, you would start seeing lot of errors. Running ",l.createElement(t.code,null,"eslint --fix-all")," would fix 90% of the issues. So don't panic."),"\n",l.createElement(t.h2,null,"Husky"),"\n",l.createElement(t.p,null,"Is a tool that helps in running scripts before git commands. We can use it to run scripts before commit, push, etc. We can use it to run tests before commit, run lint before push, etc. This helps to run any npx, bunx commands that we want to, or heck even a ",l.createElement(t.code,null,".sh")," file."),"\n",l.createElement(t.h3,null,"Configuring husky"),"\n",l.createElement(t.ol,null,"\n",l.createElement(t.li,null,"Install husky"),"\n"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<deckgo-highlight-code language="bash"  >\n          <code slot="code">bun install husky --save-dev</code>\n        </deckgo-highlight-code>'}}),"\n",l.createElement(t.ol,{start:"2"},"\n",l.createElement(t.li,null,"Add husky to ",l.createElement(t.code,null,"package.json")),"\n"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<deckgo-highlight-code language="json"  >\n          <code slot="code">{\n  &quot;devDependencies&quot;: {\n    &quot;husky&quot;: &quot;^8.0.0&quot;\n  },\n  &quot;husky&quot;: {\n    &quot;hooks&quot;: {\n      &quot;pre-commit&quot;: &quot;bun run lint-staged&quot;\n    }\n  },\n  &quot;scripts&quot;: {\n    &quot;lint-staged&quot;: &quot;lint-staged&quot;,\n    &quot;prepare&quot;: &quot;husky install&quot;\n  }\n}</code>\n        </deckgo-highlight-code>'}}),"\n",l.createElement(t.blockquote,null,"\n",l.createElement(t.p,null,"If you are using bun, it's best to add ",l.createElement(t.code,null,"husky install")," to ",l.createElement(t.code,null,"postinstall")," or the ",l.createElement(t.code,null,"prepare")," script in ",l.createElement(t.code,null,"package.json"),". This will automatically install husky when you install the package."),"\n"),"\n",l.createElement(t.blockquote,null,"\n",l.createElement(t.p,null,"Note: Bun does not print the output of the scripts"),"\n"),"\n",l.createElement(t.p,null,"This would add a folder ",l.createElement(t.code,null,".husky")," to the root of the project. This folder contains the scripts that husky runs before the git commands."),"\n",l.createElement(t.ol,{start:"3"},"\n",l.createElement(t.li,null,"In that folder, there would be a file ",l.createElement(t.code,null,"pre-commit"),". This file contains the script that husky runs before the commit command. We can add any script that we want to run before the commit command."),"\n"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<deckgo-highlight-code language="bash"  >\n          <code slot="code"># Add this to the end of the file\nnpx lint-staged</code>\n        </deckgo-highlight-code>'}}),"\n",l.createElement(t.h2,null,"Lint-staged"),"\n",l.createElement(t.p,null,"Lint-staged is a tool that helps in running scripts on staged files. We can use it to run lint on staged files, run tests on staged files, etc. This helps in running scripts on the files that are staged for commit. Also it only runs on staged files, so every commit would have proper changes."),"\n",l.createElement(t.h3,null,"Configuring lint-staged"),"\n",l.createElement(t.ol,null,"\n",l.createElement(t.li,null,"Install lint-staged"),"\n"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<deckgo-highlight-code language="bash"  >\n          <code slot="code">bun install lint-staged --save-dev</code>\n        </deckgo-highlight-code>'}}),"\n",l.createElement(t.ol,{start:"2"},"\n",l.createElement(t.li,null,"Add lint-staged to ",l.createElement(t.code,null,"package.json")),"\n"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<deckgo-highlight-code language="json"  >\n          <code slot="code">{\n  &quot;devDependencies&quot;: {\n    &quot;lint-staged&quot;: &quot;^11.0.0&quot;\n  },\n  &quot;lint-staged&quot;: {\n    &quot;*.{js,jsx,ts,tsx}&quot;: [&quot;eslint --fix&quot;, &quot;prettier --write&quot;]\n  }\n}</code>\n        </deckgo-highlight-code>'}}),"\n",l.createElement(t.h2,null,"Submodules, Husky, Lint-staged, ESLint"),"\n",l.createElement(t.p,null,"These don't work well together. If you are using submodules, you would have to install husky and lint-staged in the submodule as well. Also you would have to add the husky hooks to the submodule's package.json. This is because husky and lint-staged run in the context of the submodule."),"\n",l.createElement(t.p,null,"If the submodule does not have a package.json it's fine, you just have to init husky in it. You can add this to the ",l.createElement(t.code,null,"prepare")," script of your parent app."),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<deckgo-highlight-code language="bash"  >\n          <code slot="code">husky install &amp;&amp; cd path/to/submodule &amp;&amp; husky install</code>\n        </deckgo-highlight-code>'}}),"\n",l.createElement(t.p,null,"ESLint requires a config to be present in your submodule root as well. So just create a config and extend it from your parent app."),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<deckgo-highlight-code language="js"  >\n          <code slot="code">module.exports = {\n  extends: [&quot;../.eslintrc.js&quot;],\n};</code>\n        </deckgo-highlight-code>'}}),"\n",l.createElement(t.blockquote,null,"\n",l.createElement(t.p,null,"You should also add a ",l.createElement(t.code,null,"tsconfig.json")," to the submodule root. This is because husky and lint-staged run in the context of the submodule. So they would need a tsconfig.json to run the scripts. Just follow the same and extend the config from the parent app."),"\n"),"\n",l.createElement(t.p,null,"That's it. Now every time you commit, husky would run lint-staged and lint-staged would run eslint and prettier on the staged files. This would ensure that the code is linted and formatted before every commit. Cheers."),"\n",l.createElement(t.h4,null,"References"),"\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,l.createElement(t.a,{href:"https://github.com/lint-staged/lint-staged"},"lint-staged/lint-staged")),"\n",l.createElement(t.li,null,l.createElement(t.a,{href:"https://www.reddit.com/r/typescript/comments/12lyyou/how_do_you_handle_eslintprettier_configs_across/"},"How do you handle eslint/prettier configs across multiple projects with submodules?")),"\n",l.createElement(t.li,null,l.createElement(t.a,{href:"https://github.com/airbnb/javascript/tree/master/packages/eslint-config-airbnb"},"airbnb/javascript eslint-config-airbnb")),"\n",l.createElement(t.li,null,l.createElement(t.a,{href:"https://github.com/lint-staged/lint-staged/issues/893"},"Lint-staged/lint-staged issue #893")),"\n",l.createElement(t.li,null,l.createElement(t.a,{href:"https://www.npmjs.com/package/eslint-config-airbnb-typescript"},"eslint-config-airbnb-typescript on npm")),"\n",l.createElement(t.li,null,l.createElement(t.a,{href:"https://dev.to/maithanhdanh/configuration_for_husky_pre_commit"},"Configuration for Husky pre-commit")),"\n",l.createElement(t.li,null,l.createElement(t.a,{href:"https://stackoverflow.com/questions/67128011/eslint-on-git-submodule-how-to-overwrite-parent-config"},"eslint on git submodule, how to overwrite parent config")),"\n",l.createElement(t.li,null,l.createElement(t.a,{href:"https://github.com/tarsinzer/monoreact/issues/192"},"tarsinzer/monoreact issue #192")),"\n"))}var s=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,o.a)(),e.components);return t?l.createElement(t,e,l.createElement(a,e)):a(e)},r=n(9861),i=n(6162),c=n(9202),u=n(2092),d=n(6243),m=n(1528),h=n(4021);const g={Banner:m.Z};function p(e){return(0,l.useEffect)((()=>{(0,c.q)()}),[]),l.createElement("div",{className:"blog-content"},l.createElement(u.Z,{title:`Samuel Lawrentz | ${e.data.mdx.frontmatter.title}`,description:e.data.mdx.frontmatter.description,image:`/og-images/${e.data.mdx.frontmatter.path.replace(/[/-]/gi,"")}.png`,article:!0}),l.createElement(i.Z,{fluid:e.data.mdx.frontmatter.heroImage.childImageSharp.fluid,className:"hero-image"}),l.createElement("h1",null,e.data.mdx.frontmatter.title),l.createElement(d.g,{className:"tags",spacing:[0]},e.data.mdx.frontmatter.tags.map((e=>l.createElement("div",{className:"tag"},e)))),l.createElement("p",{className:"regularLight"},l.createElement("div",{className:"text-regularLight"},e.data.mdx.frontmatter.date)),l.createElement(d.g,{className:"blog-cont text-regular",spacing:[72]},l.createElement(o.Z,{components:g},l.createElement("div",null,e.children))),l.createElement(d.g,{spacing:[32]},"That's it for now, thanks for reading! You can find me at"," ",l.createElement("a",{href:"https://x.com/samuellawrentz"}," @samuellawrentz")," on X."),l.createElement(r.Z,{repo:"samuellawrentz/blog-comments",repoId:"R_kgDOH0vDow",category:"General",categoryId:"DIC_kwDOH0vDo84CQ111",mapping:"pathname",reactionsEnabled:"0",emitMetadata:"0",theme:"dark"}),l.createElement(h.do,{config:{alignment:"left",color:"social",enabled:!0,font_size:16,hide_desktop:!1,labels:"counts",language:"en",min_count:0,networks:["linkedin","facebook","twitter","pinterest","email","whatsapp"],padding:12,radius:4,show_total:!0,show_mobile:!0,show_toggle:!0,size:48,top:160,url:`https://samuellawrentz.com${e.data.mdx.frontmatter.path}`,description:e.data.mdx.frontmatter.description,title:e.data.mdx.frontmatter.title,message:`Check out this post by Samuel Lawrentz on - ${e.data.mdx.frontmatter.title}.\n            Find it here - https://samuellawrentz.com${e.data.mdx.frontmatter.path}\n            `,subject:`Samuel Lawrentz Blog - ${e.data.mdx.frontmatter.title}`,username:"samuellawrentz"}}))}function f(e){return l.createElement(p,e,l.createElement(s,e))}}}]);
//# sourceMappingURL=component---src-templates-blog-post-tsx-content-file-path-blog-coding-standards-husky-typescript-lint-staged-post-md-2d238a0ccb29b63ff340.js.map