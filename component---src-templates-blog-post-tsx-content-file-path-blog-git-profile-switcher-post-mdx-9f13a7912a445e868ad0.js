"use strict";(self.webpackChunksamuellawrentz_s_portfolio=self.webpackChunksamuellawrentz_s_portfolio||[]).push([[8386],{69755:function(e,t,n){n.r(t),n.d(t,{default:function(){return q}});var o=n(11151),l=n(67294);function a(e){const t=Object.assign({p:"p",h2:"h2",ul:"ul",li:"li",strong:"strong",ol:"ol",code:"code",span:"span",h3:"h3",hr:"hr",em:"em",a:"a"},(0,o.a)(),e.components);return l.createElement(l.Fragment,null,l.createElement(t.p,null,"Ever found yourself in this scenario? You're working on a personal project, push to GitHub, and suddenly you're committing as your work account. Or worse, you get that dreaded \"Permission denied (publickey)\" error even though your SSH config looks perfect."),"\n",l.createElement(t.p,null,"If you're juggling multiple GitHub accounts, you know the pain. Let's build a solution that actually works."),"\n",l.createElement(t.h2,null,"The Problem: Manual Git Profile Management"),"\n",l.createElement(t.p,null,"As developers, we often need to maintain separate GitHub identities:"),"\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,l.createElement(t.strong,null,"Personal account")," for side projects and open source contributions"),"\n",l.createElement(t.li,null,l.createElement(t.strong,null,"Work account")," for company projects"),"\n",l.createElement(t.li,null,l.createElement(t.strong,null,"Client accounts")," for freelance work"),"\n"),"\n",l.createElement(t.p,null,"The manual process involves:"),"\n",l.createElement(t.ol,null,"\n",l.createElement(t.li,null,"Updating ",l.createElement(t.code,null,"git config user.name")," and ",l.createElement(t.code,null,"git config user.email")),"\n",l.createElement(t.li,null,"Managing multiple SSH keys"),"\n",l.createElement(t.li,null,"Editing SSH config files"),"\n",l.createElement(t.li,null,"Dealing with SSH agent caching issues"),"\n"),"\n",l.createElement(t.p,null,"But here's the hidden problem that trips everyone up..."),"\n",l.createElement(t.h2,null,"The Hidden Issue: SSH Agent Caching"),"\n",l.createElement(t.p,null,"You've done everything right:"),"\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,"Generated separate SSH keys for each account"),"\n",l.createElement(t.li,null,"Updated your ",l.createElement(t.code,null,"~/.ssh/config")," file"),"\n",l.createElement(t.li,null,"Set the correct git user config"),"\n"),"\n",l.createElement(t.p,null,"Yet you still get authentication errors. Why?"),"\n",l.createElement(t.p,null,l.createElement(t.strong,null,"The SSH agent caches your keys and ignores your SSH config file!")),"\n",l.createElement(t.p,null,"When you run ",l.createElement(t.code,null,"ssh-add"),", the agent remembers which key to use for GitHub.com. Even if you change your SSH config, the agent keeps using the cached key. This is why switching accounts feels like black magic."),"\n",l.createElement(t.h2,null,"The Solution: A Complete Profile Switcher"),"\n",l.createElement(t.p,null,"Let's build a bash script called ",l.createElement(t.code,null,"gsw")," (Git Switch) that handles everything:"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<deckgo-highlight-code language="bash"  >\n          <code slot="code">#!/bin/bash\n\n# Git Profile Switcher (gsw)\n# Switch between personal and work GitHub accounts seamlessly\n\nset -e\n\n# Configuration\nPERSONAL_NAME=&quot;Your Personal Name&quot;\nPERSONAL_EMAIL=&quot;personal@example.com&quot;\nPERSONAL_SSH_KEY=&quot;$HOME/.ssh/id_personal&quot;\n\nWORK_NAME=&quot;Your Work Name&quot;\nWORK_EMAIL=&quot;work@company.com&quot;\nWORK_SSH_KEY=&quot;$HOME/.ssh/id_work&quot;\n\n# Colors for output\nRED=&#39;\\033[0;31m&#39;\nGREEN=&#39;\\033[0;32m&#39;\nYELLOW=&#39;\\033[1;33m&#39;\nNC=&#39;\\033[0m&#39; # No Color\n\n# Function to print colored output\nprint_status() {\n    echo -e &quot;${GREEN}[INFO]${NC} $1&quot;\n}\n\nprint_warning() {\n    echo -e &quot;${YELLOW}[WARNING]${NC} $1&quot;\n}\n\nprint_error() {\n    echo -e &quot;${RED}[ERROR]${NC} $1&quot;\n}\n\n# Function to show current configuration\nshow_current_config() {\n    echo &quot;Current Git Configuration:&quot;\n    echo &quot;------------------------&quot;\n    echo &quot;Name: $(git config --global user.name)&quot;\n    echo &quot;Email: $(git config --global user.email)&quot;\n    echo &quot;SSH Key: $(ssh-add -l | grep github || echo &#39;No GitHub key in agent&#39;)&quot;\n    echo &quot;&quot;\n}\n\n# Function to update SSH config\nupdate_ssh_config() {\n    local profile=$1\n    local ssh_key=$2\n\n    # Backup existing config\n    cp &quot;$HOME/.ssh/config&quot; &quot;$HOME/.ssh/config.backup&quot; 2&gt;/dev/null || true\n\n    # Remove existing GitHub entries\n    sed -i &#39;&#39; &#39;/^Host github\\.com$/,/^$/d&#39; &quot;$HOME/.ssh/config&quot; 2&gt;/dev/null || true\n\n    # Add new GitHub configuration\n    cat &gt;&gt; &quot;$HOME/.ssh/config&quot; &lt;&lt; EOF\n\nHost github.com\n    HostName github.com\n    User git\n    IdentityFile $ssh_key\n    IdentitiesOnly yes\n    AddKeysToAgent yes\n\nEOF\n\n    print_status &quot;SSH config updated for $profile profile&quot;\n}\n\n# Function to switch SSH keys\nswitch_ssh_key() {\n    local ssh_key=$1\n\n    # Remove all SSH keys from agent\n    ssh-add -D 2&gt;/dev/null || true\n\n    # Add the new key\n    ssh-add &quot;$ssh_key&quot;\n\n    print_status &quot;SSH key switched to $ssh_key&quot;\n}\n\n# Function to update git configuration\nupdate_git_config() {\n    local name=$1\n    local email=$2\n\n    git config --global user.name &quot;$name&quot;\n    git config --global user.email &quot;$email&quot;\n\n    print_status &quot;Git config updated: $name &lt;$email&gt;&quot;\n}\n\n# Main switching logic\nswitch_profile() {\n    local profile=$1\n\n    case $profile in\n        &quot;personal&quot;|&quot;p&quot;)\n            print_status &quot;Switching to PERSONAL profile&quot;\n            update_ssh_config &quot;personal&quot; &quot;$PERSONAL_SSH_KEY&quot;\n            switch_ssh_key &quot;$PERSONAL_SSH_KEY&quot;\n            update_git_config &quot;$PERSONAL_NAME&quot; &quot;$PERSONAL_EMAIL&quot;\n            ;;\n        &quot;work&quot;|&quot;w&quot;)\n            print_status &quot;Switching to WORK profile&quot;\n            update_ssh_config &quot;work&quot; &quot;$WORK_SSH_KEY&quot;\n            switch_ssh_key &quot;$WORK_SSH_KEY&quot;\n            update_git_config &quot;$WORK_NAME&quot; &quot;$WORK_EMAIL&quot;\n            ;;\n        *)\n            print_error &quot;Unknown profile: $profile&quot;\n            echo &quot;Usage: gsw [personal|work|p|w|status]&quot;\n            exit 1\n            ;;\n    esac\n\n    show_current_config\n}\n\n# Function to show help\nshow_help() {\n    echo &quot;Git Profile Switcher (gsw)&quot;\n    echo &quot;Usage: gsw [personal|work|p|w|status|help]&quot;\n    echo &quot;&quot;\n    echo &quot;Commands:&quot;\n    echo &quot;  personal, p    Switch to personal GitHub account&quot;\n    echo &quot;  work, w        Switch to work GitHub account&quot;\n    echo &quot;  status         Show current configuration&quot;\n    echo &quot;  help           Show this help message&quot;\n}\n\n# Main script logic\ncase &quot;${1:-}&quot; in\n    &quot;personal&quot;|&quot;p&quot;|&quot;work&quot;|&quot;w&quot;)\n        switch_profile &quot;$1&quot;\n        ;;\n    &quot;status&quot;|&quot;s&quot;)\n        show_current_config\n        ;;\n    &quot;help&quot;|&quot;h&quot;|&quot;-h&quot;|&quot;--help&quot;)\n        show_help\n        ;;\n    &quot;&quot;)\n        print_error &quot;No profile specified&quot;\n        show_help\n        exit 1\n        ;;\n    *)\n        print_error &quot;Unknown command: $1&quot;\n        show_help\n        exit 1\n        ;;\nesac</code>\n        </deckgo-highlight-code>'}}),"\n",l.createElement(t.h2,null,"Implementation Details Explained"),"\n",l.createElement(t.h3,null,"Why ",l.createElement(t.code,null,"ssh-add -D")," is Critical"),"\n",l.createElement(t.p,null,"The ",l.createElement(t.code,null,"ssh-add -D")," command removes ",l.createElement(t.strong,null,"all")," keys from the SSH agent. This is the magic that makes profile switching work. Without it, the agent would keep using the cached key regardless of your SSH config changes."),"\n",l.createElement(t.h3,null,"Using ",l.createElement(t.code,null,"$HOME")," Instead of ",l.createElement(t.code,null,"~")),"\n",l.createElement(t.p,null,"In bash scripts, ",l.createElement(t.code,null,"$HOME")," is more reliable than ",l.createElement(t.code,null,"~")," because:"),"\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,l.createElement(t.code,null,"~")," expansion doesn't work consistently in all contexts"),"\n",l.createElement(t.li,null,l.createElement(t.code,null,"$HOME")," works reliably in variable assignments and file paths"),"\n",l.createElement(t.li,null,"It's more explicit about what you're referencing"),"\n"),"\n",l.createElement(t.h3,null,"SSH Config Management"),"\n",l.createElement(t.p,null,"The script:"),"\n",l.createElement(t.ol,null,"\n",l.createElement(t.li,null,"Backs up your existing SSH config"),"\n",l.createElement(t.li,null,"Removes any existing GitHub.com entries"),"\n",l.createElement(t.li,null,"Adds a fresh configuration for the selected profile"),"\n"),"\n",l.createElement(t.p,null,"This prevents conflicts and ensures clean switching."),"\n",l.createElement(t.h2,null,"Setting Up Your Environment"),"\n",l.createElement(t.h3,null,"1. Generate SSH Keys"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<deckgo-highlight-code language="bash"  >\n          <code slot="code"># Personal key\nssh-keygen -t ed25519 -C &quot;personal@example.com&quot; -f ~/.ssh/id_personal\n\n# Work key\nssh-keygen -t ed25519 -C &quot;work@company.com&quot; -f ~/.ssh/id_work</code>\n        </deckgo-highlight-code>'}}),"\n",l.createElement(t.h3,null,"2. Add Keys to GitHub"),"\n",l.createElement(t.p,null,"Add the public keys (",l.createElement(t.code,null,"id_personal.pub")," and ",l.createElement(t.code,null,"id_work.pub"),") to their respective GitHub accounts."),"\n",l.createElement(t.h3,null,"3. Install the Script"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<deckgo-highlight-code language="bash"  >\n          <code slot="code"># Make it executable\nchmod +x gsw\n\n# Move to a directory in your PATH\nsudo mv gsw /usr/local/bin/</code>\n        </deckgo-highlight-code>'}}),"\n",l.createElement(t.h3,null,"4. Add Aliases (Optional)"),"\n",l.createElement(t.p,null,"Add these to your ",l.createElement(t.code,null,"~/.zshrc")," or ",l.createElement(t.code,null,"~/.bashrc"),":"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<deckgo-highlight-code language="bash"  >\n          <code slot="code">alias gsw-p=&#39;gsw personal&#39;\nalias gsw-w=&#39;gsw work&#39;\nalias gsw-s=&#39;gsw status&#39;</code>\n        </deckgo-highlight-code>'}}),"\n",l.createElement(t.h2,null,"Usage Examples"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<deckgo-highlight-code language="bash"  >\n          <code slot="code"># Switch to personal account\ngsw personal\n\n# Switch to work account\ngsw work\n\n# Check current configuration\ngsw status\n\n# Quick aliases\ngsw-p    # Switch to personal\ngsw-w    # Switch to work\ngsw-s    # Show status</code>\n        </deckgo-highlight-code>'}}),"\n",l.createElement(t.h2,null,"Troubleshooting Common Issues"),"\n",l.createElement(t.h3,null,'"Permission denied (publickey)" Error'),"\n",l.createElement(t.ol,null,"\n",l.createElement(t.li,null,"Verify the SSH key exists: ",l.createElement(t.code,null,"ls -la ~/.ssh/id_*")),"\n",l.createElement(t.li,null,"Check if key is in agent: ",l.createElement(t.code,null,"ssh-add -l")),"\n",l.createElement(t.li,null,"Test connection: ",l.createElement(t.code,null,"ssh -T git@github.com")),"\n"),"\n",l.createElement(t.h3,null,"Git Commit Still Shows Wrong Author"),"\n",l.createElement(t.ol,null,"\n",l.createElement(t.li,null,"Check global config: ",l.createElement(t.code,null,"git config --global --list")),"\n",l.createElement(t.li,null,"Check local config: ",l.createElement(t.code,null,"git config --local --list")," (in repo directory)"),"\n",l.createElement(t.li,null,"Remove local config if needed: ",l.createElement(t.code,null,"git config --local --unset user.name")),"\n"),"\n",l.createElement(t.h3,null,"SSH Agent Not Running"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<deckgo-highlight-code language="bash"  >\n          <code slot="code"># Start SSH agent\neval &quot;$(ssh-agent -s)&quot;\n\n# Add it to your shell profile\necho &#39;eval &quot;$(ssh-agent -s)&quot;&#39; &gt;&gt; ~/.zshrc</code>\n        </deckgo-highlight-code>'}}),"\n",l.createElement(t.h2,null,"Bonus Tips"),"\n",l.createElement(t.h3,null,"Same SSH Key on Multiple Accounts"),"\n",l.createElement(t.p,null,"You can use the same SSH key for multiple GitHub accounts. Just add the same public key to both accounts. The script will still work for switching git user configs."),"\n",l.createElement(t.h3,null,"Shell Integration"),"\n",l.createElement(t.p,null,"Add this function to your shell for a nice prompt indicator:"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<deckgo-highlight-code language="bash"  >\n          <code slot="code"># Add to ~/.zshrc or ~/.bashrc\ngit_profile_prompt() {\n    local email=$(git config --global user.email)\n    if [[ $email == *&quot;personal&quot;* ]]; then\n        echo &quot;üè†&quot;\n    elif [[ $email == *&quot;work&quot;* ]]; then\n        echo &quot;üíº&quot;\n    else\n        echo &quot;‚ùì&quot;\n    fi\n}\n\n# Add to your prompt\nexport PS1=&#39;$(git_profile_prompt) &#39;$PS1</code>\n        </deckgo-highlight-code>'}}),"\n",l.createElement(t.h3,null,"Git Hooks for Safety"),"\n",l.createElement(t.p,null,"Create a pre-commit hook to verify you're using the right identity:"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<deckgo-highlight-code language="bash"  >\n          <code slot="code">#!/bin/sh\n# .git/hooks/pre-commit\n\nREPO_EMAIL=$(git config user.email)\nGLOBAL_EMAIL=$(git config --global user.email)\n\nif [ &quot;$REPO_EMAIL&quot; != &quot;$GLOBAL_EMAIL&quot; ]; then\n    echo &quot;‚ö†Ô∏è  Warning: Local git email differs from global profile&quot;\n    echo &quot;Local: $REPO_EMAIL&quot;\n    echo &quot;Global: $GLOBAL_EMAIL&quot;\nfi</code>\n        </deckgo-highlight-code>'}}),"\n",l.createElement(t.h2,null,"The Bottom Line"),"\n",l.createElement(t.p,null,"Managing multiple GitHub accounts doesn't have to be a headache. The key is understanding that SSH agent caching is the real culprit behind most authentication issues."),"\n",l.createElement(t.p,null,"With this ",l.createElement(t.code,null,"gsw")," script, you can:"),"\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,"Switch profiles instantly"),"\n",l.createElement(t.li,null,"Avoid SSH agent conflicts"),"\n",l.createElement(t.li,null,"Maintain clean git history"),"\n",l.createElement(t.li,null,"Focus on coding instead of configuration"),"\n"),"\n",l.createElement(t.p,null,'No more "why isn\'t this working?" moments. Just clean, reliable profile switching.'),"\n",l.createElement(t.hr),"\n",l.createElement(t.p,null,l.createElement(t.em,null,"Happy coding with the right identity! üöÄ")),"\n",l.createElement(t.p,null,"P.S. If you're interested in more productivity hacks, check out my post on ",l.createElement(t.a,{href:"https://samuellawrentz.com/blog/useful-css-generators/"},"useful CSS generators")," or learn about ",l.createElement(t.a,{href:"https://samuellawrentz.com/blog/vim-is-a-blackhole/"},"vim productivity tips"),"."))}var r=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,o.a)(),e.components);return t?l.createElement(t,e,l.createElement(a,e)):a(e)},c=n(14160),i=n(99861),u=n(76162),s=n(79202),h=n(22092),m=n(96243),g=n(31528),d=n(44021),p=n(60146);const E={Banner:g.Z};function f(e){(0,l.useEffect)((()=>{(0,s.q)()}),[]);const t=(0,p.u)(e.data.mdx.frontmatter.title,e.pageContext.nodes.length);return l.createElement("div",{className:"blog-content"},l.createElement(h.Z,{title:`Samuel Lawrentz | ${e.data.mdx.frontmatter.title}`,description:e.data.mdx.frontmatter.description,image:`/og-images/${e.data.mdx.frontmatter.path.replace(/[/-]/gi,"")}.png`,article:!0}),l.createElement(u.Z,{fluid:e.data.mdx.frontmatter.heroImage.childImageSharp.fluid,className:"hero-image"}),l.createElement("h1",null,e.data.mdx.frontmatter.title),l.createElement(m.g,{className:"tags",spacing:[0]},e.data.mdx.frontmatter.tags.map((e=>l.createElement("div",{className:"tag"},e)))),l.createElement("p",{className:"regularLight"},l.createElement("div",{className:"text-regularLight"},e.data.mdx.frontmatter.date)),l.createElement(m.g,{className:"blog-cont text-regular",spacing:[72]},l.createElement(o.Z,{components:E},l.createElement("div",null,e.children))),l.createElement(m.g,{spacing:[32]},l.createElement("h3",{className:"hacks-cont"},"Explore more articles"),l.createElement("ul",null,t.map((t=>{const n=e.pageContext.nodes[t];return l.createElement("li",{key:t},l.createElement(c.rU,{to:n.frontmatter.path,className:"gradient"},l.createElement("div",null,n.frontmatter.title)))})))),l.createElement(m.g,{spacing:[32]},"That's it for now, thanks for reading! You can find me at"," ",l.createElement("a",{href:"https://x.com/samuellawrentz"}," @samuellawrentz")," on X."),l.createElement(i.Z,{repo:"samuellawrentz/blog-comments",repoId:"R_kgDOH0vDow",category:"General",categoryId:"DIC_kwDOH0vDo84CQ111",mapping:"pathname",reactionsEnabled:"0",emitMetadata:"0",theme:"dark"}),l.createElement(d.do,{config:{alignment:"left",color:"social",enabled:!0,font_size:16,hide_desktop:!1,labels:"counts",language:"en",min_count:0,networks:["linkedin","facebook","twitter","pinterest","email","whatsapp"],padding:12,radius:4,show_total:!0,show_mobile:!0,show_toggle:!0,size:48,top:160,url:`https://samuellawrentz.com${e.data.mdx.frontmatter.path}`,description:e.data.mdx.frontmatter.description,title:e.data.mdx.frontmatter.title,message:`Check out this post by Samuel Lawrentz on - ${e.data.mdx.frontmatter.title}.\n            Find it here - https://samuellawrentz.com${e.data.mdx.frontmatter.path}\n            `,subject:`Samuel Lawrentz Blog - ${e.data.mdx.frontmatter.title}`,username:"samuellawrentz"}}))}function q(e){return l.createElement(f,e,l.createElement(r,e))}}}]);
//# sourceMappingURL=component---src-templates-blog-post-tsx-content-file-path-blog-git-profile-switcher-post-mdx-9f13a7912a445e868ad0.js.map