{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/blog/gatsby-dynamic-og-images/","result":{"data":{"mdx":{"id":"6fb9b713-4279-5ec3-a3df-58c3f360b71f","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Dynamic OG images for your Gatsby blog\",\n  \"date\": \"2022-07-27T00:00:00.000Z\",\n  \"heroImage\": \"./Blog OG.png\",\n  \"path\": \"/blog/gatsby-dynamic-og-images/\",\n  \"published\": true,\n  \"tags\": [\"gatsby\", \"node\"],\n  \"description\": \"So this website is built using GatsbyJS, which is super cool and super easy to get started. It took just one week for me to set this all up. This is the 6th blog post here on this website and if you try sharing this blog post on the internet you would see a image with the title. This image is called the OG image. Click to read more...\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar Banner = makeShortcode(\"Banner\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"So this website is built using \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.gatsbyjs.com/\"\n  }, \"GatsbyJS\"), \", which is super cool and super easy to get started. It took just one week for me to set this all up. This is the 6th blog post here on this website and if you try sharing this blog post on the internet you would see a image with the title. This image is called the OG image.\"), mdx(\"h2\", null, \"What is an OG image?\"), mdx(\"p\", null, \"Open Graph Images is a simple way to add images to your posts. An open graph image or OG image is the image that appears when you post a link to a web page or video content on your social media sites. This forms part of an important group of meta tags that directly impact how the content links perform on social media platforms. \"), mdx(Banner, {\n    mdxType: \"Banner\"\n  }, \"Try sharing this link on twitter or linkedin, you would find the OG being rendered.\"), mdx(\"h2\", null, \"GatsbyJS and OG images\"), mdx(\"p\", null, \"Gatsby ecosystem is growing everyday and new plugins popup every day. There are few plugins which creates OG images from HTML/JSX content. These plugins use \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://pptr.dev/\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"pupeteer\")), \" to load that HTML content and then it takes a screenshot of the page and then saves it as a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".png\"), \". It is a quite awesome plugin. \"), mdx(\"h3\", null, \"Pupeteer\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pupeteer\"), \" is nothing but a Chrome browser that runs headlessly and there are options to integrate the live chrome browser as well. The issue with this thing is that, it takes \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"~280mb\"), \" to run and I'm personally a person who doesn't like apps or bundles that takes a lot of space. Eventhough \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pupeteer\"), \" is a dev dependency, I wanted a simple solution to generate my OG images.\"), mdx(\"h2\", null, \"The solution\"), mdx(\"p\", null, \"After doing some intensive google searches, I figured out there is actually another way to create OG images - \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"The canvas way\"), \". Why to use a heavy package as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pupeteer\"), \" when you just want a canvas that can be exported as a PNG image. Then I came across this package called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"node-canvas\"), \" which does the same thing as HTML canvas but it does it in nodeJS, so that you don't need to fire up a browser inorder to screenshot your page. \"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1200px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/2312cdfb2bf43fc91f2408819b546442/c1b63/07407175-d0dc-51f4-9df7-ae572692cbba.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"52.66666666666667%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC2ElEQVQoz03R32sbBQDA8XvxwQd98MEHhQkqKs5fE4pSdEMrDNxkuqRNL8ldrpfL79zlmqTJ0l0v6eXy45Jck9qm3TqXibooDjc21JYpFvaggoigf9BX6gbuP/jARwj+VST02zLhQxNpv0Dspo56PY92NUt6nCXvZzBaaZatFOVygkpeoxaPY0WWsAMK62diNN+XaM9KeCeiCMbfbcw/XIx7dTL7VVa+r1P9zqZ23aK0W0LvpjEbKYoXkqwUNC6k4qzGVNZCCo2zMZw5mdZJCe/NIP2Xgwi5P9cp/Opg/lLH+OEi+o0K+hdFzL1lzJGB4T7QlRJUckc69b7unEJjUaYZkOjMLOLM9Wm97SCI90yidwvE7hio3+pokxzalylSkwR664Gu+pBOVllbUGicieGcl3E/kvDeWMD+cIpz6jKCdFhE2V8mftMkMTVIT3Sy4xz6RpaCm6ZopVgpJ6nmE6xqGlZ4iXpgCeesgnvySBfFOxFm8MI8w2NBhPCBTuRWDmmaJjZJkt3KUeoXSLVUCnaSQlnFzMiUl2QqoSgXAzL26TD12QXcdyJ0ZyL0XgnjPy8yejqEsP77JvbPXVoHPp3bA5xpk9KmyaWvt7DbJbyuxY7f5dNGg0t1l76UY7Tqcrk5ZPieRvc1kcFLIsNnFtl8cgGhdbeDd7hF98c+3p0O3tRjbVxje+LTbFfpNle54ve55g24YrfxPtZwKzaDzgYbMzK94yL+c4uMngqx9cQ8QuenHu6BT+NWA+ubMqPpkOG1HptXO+zseDTKBmPHYa/eYq/isDYn0pwVcV8N3te9KDI8FvpPt/34PIJ2wyQ+yZDcyZLxM+RaCXRLo27Y2HqJakKhFo5hnZdxzqk0P5BpvyvhzUTpHw/jP/u/bvxoEEH7Kk/6szzZ7Rx6/2g2RaWmc1v+h13lcypqBFuMU/9EYf20jHtKovNWhN7rR7MP6R6bZ/eRAP8Cf5sDZaZco20AAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Generated Image\",\n    \"title\": \"The Gatsby OG image generated using node canvas\",\n    \"src\": \"/static/2312cdfb2bf43fc91f2408819b546442/c1b63/07407175-d0dc-51f4-9df7-ae572692cbba.png\",\n    \"srcSet\": [\"/static/2312cdfb2bf43fc91f2408819b546442/5a46d/07407175-d0dc-51f4-9df7-ae572692cbba.png 300w\", \"/static/2312cdfb2bf43fc91f2408819b546442/0a47e/07407175-d0dc-51f4-9df7-ae572692cbba.png 600w\", \"/static/2312cdfb2bf43fc91f2408819b546442/c1b63/07407175-d0dc-51f4-9df7-ae572692cbba.png 1200w\"],\n    \"sizes\": \"(max-width: 1200px) 100vw, 1200px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"The above image was generated using the following code and its the OG image for this blog.\"), mdx(\"h3\", null, \"Integrating \", mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"https://github.com/Automattic/node-canvas\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"node-canvas\")), \" into the Gatsby Ecosystem\"), mdx(\"p\", null, \"It is time to implement our idea. This is where the concept of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"plugins\"), \" come into picture. \"), mdx(\"h4\", null, \"Gatsby Plugins\"), mdx(\"p\", null, \"Gatsby has almost 3000 plugins for each of your requirement be it meta tags, RSS feeds, image optimization, etc. These plugins tap into your website content/data and then create assets or does stuff that you want to before build, post build, etc. \"), mdx(\"h4\", null, \"The plugin\"), mdx(\"p\", null, \"A local plugin can be created by creating a folder with package.json in it. The code goes into the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-node.js\"), \" file.\"), mdx(\"deckgo-highlight-code\", {\n    \"language\": \"js\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"// plugins/gatsby-node.js\\nconst canvas = require('../../canvas.js')\\nconst fs = require('fs')\\nconst path = require('path')\\nexports.createPages = async ({ actions, graphql }) => {\\n\\tconst folderpath = './public/og-images'\\n\\tif (!fs.existsSync(folderpath)) \\n          fs.mkdirSync(path.resolve(folderpath))\\n\\tconst result = await graphql(`{{query}}`)\\n\\n if (result.errors) {\\n\\tconsole.error(errors)\\n\\treturn console.error({ ...result.errors })\\n\\t}\\n\\n\\tconst posts = result.data.allMdx.nodes\\n\\n\\tfor (const node of posts) {\\n\\tcanvas.gen(node.frontmatter.title, node.id)\\n\\t}\\n}\"), \"\\n        \"), mdx(\"p\", null, \"This code is nothing but a simple graphQL query which returns you the list of posts and then renders an OF image using the title of each post.\"), mdx(\"h2\", null, \"The Canvas\"), mdx(\"p\", null, \"Canvas is a very fun thing to work in the HTML world. Canvas is pretty useful to do paint related stuff in browser. Thanks to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"node-canvas\"), \" we now have the capablity to play with canvas even on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"node\"), \" environments.\"), mdx(\"p\", null, \"The code for generating canvas can be found below. You can play with the canvas. This is the code that generates my OG images on the fly.\"), mdx(\"deckgo-highlight-code\", {\n    \"language\": \"js\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"// canvas.js\\nconst { createCanvas, loadImage } = require('canvas')\\nconst fs = require('fs')\\nconst path = require('path')\\n// Size for the OG image\\nconst canvas = createCanvas(1200, 630)\\nconst ctx = canvas.getContext('2d')\\n\\nlet drawCircle = function (x, y, d) {\\n  // Draw circle\\n};\\n\\n\\nexports.gen = function gen(title, id) {\\n\\n\\n  // Linear Gradient\\n  var grd = ctx.createLinearGradient(0, 0, 1200, 630);\\n  grd.addColorStop(0, 'hsl(' + 360 * Math.random() + ',70%,60%)');\\n  grd.addColorStop(1, 'hsl(' + 360 * Math.random() + ',100%,30%)');\\n  ctx.fillStyle = grd;\\n  ctx.fillRect(0, 0, 1200, 630);\\n  const noOfSircles = Math.ceil(Math.random() * 7)\\n  const noOfRect = Math.ceil(Math.random() * 7)\\n  // Set fontstyle\\n  ctx.font = '900 70px Courier';\\n  ctx.fillStyle = 'white';\\n  d\\n  // call helper method to get number of lines\\n  const lines = getLines(ctx, title, 1080)\\n  lines.forEach((line, i) => ctx.fillText(line, 60, 580 - (80 * (lines.length - i))))\\n  // Set fontstyle\\n  ctx.font = '48px Courier';\\n  ctx.fillText('{{Author Name}}', 60, 120)\\n  ctx.font = '100 24px Courier';\\n  ctx.fillText('{{slogan}}', 60, 150)\\n\\n  const buffer = canvas.toBuffer('image/png')\\n  console.info('Generating for', id)\\n  // write as .png\\n  fs.writeFileSync(path.resolve(`./public/og-images/${id}.png`), buffer)\\n}\\n\"), \"\\n        \"), mdx(\"p\", null, \"That is how the OG image for this blog is getting generated. Hope you liked this post. Stay tuned for more.\"), mdx(\"p\", null, \"\\u2764\\uFE0F\\u2764\\uFE0F\\u2764\\uFE0F\"));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"Dynamic OG images for your Gatsby blog","description":"So this website is built using GatsbyJS, which is super cool and super easy to get started. It took just one week for me to set this all up. This is the 6th blog post here on this website and if you try sharing this blog post on the internet you would see a image with the title. This image is called the OG image. Click to read more...","date":"27 Jul, 2022","path":"/blog/gatsby-dynamic-og-images/","tags":["gatsby","node"],"heroImage":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAB2HAAAdhwGP5fFlAAABHElEQVQoz3WS2U7DMBBF3TaFgpDYylLBA+IT0zYpgqakCH5t7MRpP+miGWdxTHi4ysjxHN9Z1NnGINT5W4GT1EAtCWqlnYJ4vNaYbQqcpkY0q3MVJw9psg4gDTSmNp4mRqBOBlGioTjgF9gRX+BDgYWQmDBNaxfykAM3uSO5T1BtUig+j0nglx+lfB/zCreZ7bkctRWQBxxSTLjelnjaH3C3s1jkFe4/La62pYMsO2jnmIFyoIOfLuZyGMquLt4Liec7i0kS9tcDun7R4BQX+wov30c8fx3w+nOUmF1GPWBjiMsnNxRutgrLWGncZBYPeSUlzzMrMHbZX6MaWEMVT42h/+1aJJPvNPbXyQc1YIb1d47+NnxoA/xBeNBfBNjDrkviXwoAAAAASUVORK5CYII=","aspectRatio":1.9067796610169492,"src":"/static/e08dfe32ae1071fb71e64ec3aa08e381/db955/Blog%20OG.png","srcSet":"/static/e08dfe32ae1071fb71e64ec3aa08e381/7e7e9/Blog%20OG.png 225w,\n/static/e08dfe32ae1071fb71e64ec3aa08e381/62b1f/Blog%20OG.png 450w,\n/static/e08dfe32ae1071fb71e64ec3aa08e381/db955/Blog%20OG.png 900w,\n/static/e08dfe32ae1071fb71e64ec3aa08e381/82360/Blog%20OG.png 1350w,\n/static/e08dfe32ae1071fb71e64ec3aa08e381/bbee5/Blog%20OG.png 1800w,\n/static/e08dfe32ae1071fb71e64ec3aa08e381/0ef64/Blog%20OG.png 2400w","sizes":"(max-width: 900px) 100vw, 900px"}}}}}},"pageContext":{"title":"Dynamic OG images for your Gatsby blog","id":"6fb9b713-4279-5ec3-a3df-58c3f360b71f"}},"staticQueryHashes":["3412710006"]}