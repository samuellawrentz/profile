---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import SEO from '../../components/SEO.astro';

const posts = (await getCollection('blog', ({ data }) => data.published === true))
  .sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime());
---
<BaseLayout title="Blog - Samuel Lawrentz">
  <SEO slot="head" title="Blog - Samuel Lawrentz" description="Tech blog about frontend development, React, TypeScript, and web technologies" />
  <div class="blog-listing">
    <h1>Blog</h1>
    <div class="blogs">
      {posts.map(post => (
        <a href={post.data.path} class="gradient">
          <div class="card">
            <div class="card__details">
              <div class="card__date text-regularLight">{new Date(post.data.date).toLocaleDateString('en-US', { day: '2-digit', month: 'short', year: 'numeric' })}</div>
              <div class="card__title"><h4>{post.data.title}</h4></div>
              <div class="tags">
                {post.data.tags.map(tag => <span class="tag">{tag}</span>)}
              </div>
            </div>
          </div>
        </a>
      ))}
    </div>
  </div>
</BaseLayout>
